#!/bin/sh

cmd=$1
shift;

function get_volume() {
    amixer sget 'Master',0 | awk '/Front Left:/{gsub(/[\[\]%]/,"",$5); print $5}'
}

function icon {
   echo "^i(${HOME}/workspace/dotfiles/icons/${1}.xbm)"
}

case $cmd in
    volume-up)
        amixer -q set Master 1000+ unmute
        volnoti-show $(get_volume)
        ;;
    volume-down)
        amixer -q set Master 1000- unmute
        volnoti-show $(get_volume)
        ;;

    mute)
        (amixer set Master toggle | grep '\[off\]') 2>&1 > /dev/null
        if [ $? -eq 0 ]; then
            volnoti-show -m 
        else
            volnoti-show $(get_volume)
        fi
        ;;
    toggle-control)
        volwindow=$(xdotool search --name "Volume control")
        if [ -n "${volwindow}" ]; then
            xdotool search --name "Volume control" windowkill
        else
            pavucontrol &
        fi
        ;;
    *)
        echo "No Such command"
        ;;
esac
