#!/bin/zsh

term_prog="urxvt -title Irc -e"

CONFIG=${HOME}/.irc-connection

if [ -f ${CONFIG} ]; then
    source ${CONFIG}
else
    echo "No config, try echo -e 'IRC_PORTS=1234:2345\nIRC_HOST=blah.com' > ~/.irc-connection"
    exit 1
fi

if [ "$(hostname)" != "alison" ]; then
  exec ${term_prog} mosh -p IRC_PORTS IRC_HOST irc
fi

if [ "$TERM" = "dumb" ]; then
    exec ${term_prog} irc
fi

tmux attach-session -d -t IRC;

exit 0
