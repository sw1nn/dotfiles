if test $(git config --bool sw1nn.allow-master) = "true"; then
  exit 0
fi

if test $(git rev-parse --abbrev-ref HEAD) = "master" ; then
  # NOTE: prompt matches default magit-process-yes-or-no-prompt-regexp
  printf "Cannot commit to master by default. Override (y|n)? "
  read -k 1 yn
  case $yn in
    [Yy]) exit 0;;
    *) printf "\r\nAborted. git config --add sw1nn.allow-master true to skip this check.\n"; exit 1;;
  esac
fi

# Local Variables:
# mode: Shell-Script
# sh-indentation: 2
# indent-tabs-mode: nil
# sh-basic-offset: 2
# End:
# vim: ft=zsh sw=2 ts=2 et
